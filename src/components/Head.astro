---
import { SEO } from 'astro-seo';
import type { Locale } from '../i18n/utils';
import pkg from '../../package.json';

interface AlternateLink {
  locale: Locale;
  href: string;
}

interface Props {
  title: string;
  description: string;
  canonicalUrl: string;
  ogImage: string;
  ogLocale: string;
  alternateLinks: AlternateLink[];
  locale: Locale;
}

const { title, description, canonicalUrl, ogImage, ogLocale, alternateLinks, locale } = Astro.props;
const softwareVersion = pkg.version;
---

<SEO
  title={title}
  description={description}
  canonical={canonicalUrl}
  openGraph={{
    basic: {
      title: title,
      type: 'website',
      image: ogImage,
      url: canonicalUrl,
    },
    optional: {
      description: description,
      locale: ogLocale,
      siteName: 'Dokos',
    },
    image: {
      url: ogImage,
      width: 1200,
      height: 630,
      alt: title,
    },
  }}
/>

{alternateLinks.map((alt) => (
  <link rel="alternate" hreflang={alt.locale} href={alt.href} />
))}
<link rel="alternate" hreflang="x-default" href="https://dokos.app/" />

<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "SoftwareApplication",
      "name": "Dokos",
      "description": description,
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Windows, macOS, Linux",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "softwareVersion": softwareVersion,
      "author": {
        "@type": "Organization",
        "name": "Dokos",
        "url": "https://dokos.app"
      },
      "url": "https://dokos.app",
      "inLanguage": locale
    },
    {
      "@type": "Organization",
      "name": "Dokos",
      "url": "https://dokos.app",
      "logo": {
        "@type": "ImageObject",
        "url": "https://dokos.app/favicon.svg"
      },
      "description": description,
      "sameAs": []
    }
  ]
})} />
