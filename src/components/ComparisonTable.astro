---
import Icon from './Icon.astro';
import type { Translations } from '../i18n/utils';

interface Props {
  t: Translations;
}

const { t } = Astro.props;

const tasks = [
  { task: t.comparison.jsonTask, others: 'VS Code / Browser', icon: 'data_object', dokosFeature: t.comparison.jsonDokos },
  { task: t.comparison.markdownTask, others: 'VS Code + Extensions', icon: 'edit_note', dokosFeature: t.comparison.markdownDokos },
  { task: t.comparison.pdfTask, others: 'Chrome / Preview.app', icon: 'picture_as_pdf', dokosFeature: t.comparison.pdfDokos },
  { task: t.comparison.csvTask, others: 'Excel / Google Sheets', icon: 'table_chart', dokosFeature: t.comparison.csvDokos },
  { task: t.comparison.apiTask, others: 'Swagger.io / Postman', icon: 'api', dokosFeature: t.comparison.apiDokos },
  { task: t.comparison.diffTask, others: 'diff CLI / VS Code', icon: 'difference', dokosFeature: t.comparison.diffDokos },
  { task: t.comparison.logsTask, others: 'Terminal + grep', icon: 'terminal', dokosFeature: t.comparison.logsDokos },
  { task: t.comparison.notebookTask, others: 'Jupyter Server', icon: 'science', dokosFeature: t.comparison.notebookDokos },
  { task: t.comparison.texTask, others: t.comparison.texOthers, icon: 'functions', dokosFeature: t.comparison.texDokos },
  { task: t.comparison.subtitleTask, others: t.comparison.subtitleOthers, icon: 'subtitles', dokosFeature: t.comparison.subtitleDokos },
];
---

<section class="py-24" id="comparison" aria-labelledby="comparison-heading">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <div class="text-center mb-12">
      <h2 id="comparison-heading" class="text-3xl sm:text-4xl font-bold text-white mb-4">
        {t.comparison.headingBefore} <span class="text-red-400 line-through decoration-red-400/50">{t.comparison.headingStrike}</span> {t.comparison.headingAfter}
      </h2>
      <p class="text-slate-400 max-w-2xl mx-auto">{t.comparison.subheading}</p>
    </div>

    <!-- Comparison Grid -->
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <div class="grid grid-cols-12 gap-3 mb-4 px-4">
        <div class="col-span-4 sm:col-span-3">
          <span class="text-xs text-slate-500 uppercase tracking-wider font-medium">{t.comparison.colTask}</span>
        </div>
        <div class="col-span-4 sm:col-span-4 text-center">
          <span class="text-xs text-red-400/80 uppercase tracking-wider font-medium">{t.comparison.colWithout}</span>
        </div>
        <div class="col-span-4 sm:col-span-5 text-center">
          <span class="text-xs text-green-400/80 uppercase tracking-wider font-medium">{t.comparison.colWith}</span>
        </div>
      </div>

      <!-- Rows -->
      <div class="space-y-2">
        {tasks.map((item) => (
          <div class="grid grid-cols-12 gap-3 items-center bg-surface-dark border border-slate-800 rounded-xl px-4 py-3 hover:border-slate-700 transition-colors">
            <div class="col-span-4 sm:col-span-3 flex items-center gap-2">
              <Icon name={item.icon} size="text-base" class="text-slate-500 hidden sm:inline" />
              <span class="text-sm text-white font-medium">{item.task}</span>
            </div>
            <div class="col-span-4 sm:col-span-4 text-center">
              <span class="text-xs text-slate-500 bg-red-500/5 border border-red-500/10 px-2 py-1 rounded-lg inline-block">{item.others}</span>
            </div>
            <div class="col-span-4 sm:col-span-5 text-center">
              <span class="text-xs text-green-400 bg-green-500/10 border border-green-500/20 px-2 py-1 rounded-lg inline-block">
                <Icon name="check" size="text-xs" class="text-green-400 mr-0.5 inline" />
                {item.dokosFeature}
              </span>
            </div>
          </div>
        ))}
      </div>

      <!-- Bottom summary -->
      <div class="mt-10 flex flex-col sm:flex-row items-center gap-0 max-w-3xl mx-auto">
        <!-- Before -->
        <div class="flex-1 w-full bg-red-500/5 border border-red-500/15 rounded-xl sm:rounded-r-none p-5 text-center">
          <div class="text-3xl font-bold text-red-400 mb-2">10+</div>
          <p class="text-sm text-slate-500">{t.comparison.summaryWithout}</p>
        </div>

        <!-- Arrow connector -->
        <div class="shrink-0 z-10" aria-hidden="true">
          <!-- Desktop: horizontal chevron -->
          <div class="hidden sm:block -mx-3">
            <svg width="24" height="48" viewBox="0 0 24 48" fill="none">
              <path d="M0 0 L20 24 L0 48" fill="rgba(239,68,68,0.05)" />
              <path d="M0 0 L20 24 L0 48" stroke="url(#grad-h)" stroke-width="1.5" fill="none" />
              <defs>
                <linearGradient id="grad-h" x1="0" y1="0" x2="0" y2="48" gradientUnits="userSpaceOnUse">
                  <stop offset="0%" stop-color="rgb(239,68,68)" stop-opacity="0.3" />
                  <stop offset="50%" stop-color="rgb(34,197,94)" stop-opacity="0.5" />
                  <stop offset="100%" stop-color="rgb(239,68,68)" stop-opacity="0.3" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          <!-- Mobile: vertical chevron -->
          <div class="sm:hidden -my-2">
            <svg width="48" height="20" viewBox="0 0 48 20" fill="none">
              <path d="M0 0 L24 16 L48 0" stroke="url(#grad-v)" stroke-width="1.5" fill="none" />
              <defs>
                <linearGradient id="grad-v" x1="0" y1="0" x2="48" y2="0" gradientUnits="userSpaceOnUse">
                  <stop offset="0%" stop-color="rgb(239,68,68)" stop-opacity="0.3" />
                  <stop offset="50%" stop-color="rgb(34,197,94)" stop-opacity="0.5" />
                  <stop offset="100%" stop-color="rgb(239,68,68)" stop-opacity="0.3" />
                </linearGradient>
              </defs>
            </svg>
          </div>
        </div>

        <!-- After -->
        <div class="flex-1 w-full bg-green-500/5 border border-green-500/20 rounded-xl sm:rounded-l-none p-5 text-center shadow-[0_0_20px_rgba(34,197,94,0.08)]">
          <div class="text-3xl font-bold text-green-400 mb-2">1</div>
          <p class="text-sm text-slate-400">{t.comparison.summaryWith}</p>
        </div>
      </div>
    </div>
  </div>
</section>
