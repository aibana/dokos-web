---
import Icon from './Icon.astro';
import logoDark from '../assets/logo-dark.svg';
import logoLight from '../assets/logo-light.svg';
import type { Translations } from '../i18n/utils';

interface Props {
  t: Translations;
}

const { t } = Astro.props;
---

<section class="py-24 relative overflow-hidden" aria-labelledby="cta-heading">
  <div class="absolute inset-0 bg-gradient-to-t from-primary/20 via-background-dark to-background-dark" aria-hidden="true"></div>

  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
    <div class="mb-8 flex justify-center">
      <img src={logoDark.src} alt="Dokos" class="h-24 w-24 hidden dark:block" />
      <img src={logoLight.src} alt="Dokos" class="h-24 w-24 block dark:hidden" />
    </div>

    <h2 id="cta-heading" class="text-4xl md:text-6xl font-black text-white mb-8 tracking-tight">
      {t.ctaFinal.headingLine1}<br />
      <span class="text-primary">{t.ctaFinal.headingLine2}</span>
    </h2>

    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
      <button
        id="cta-download-btn"
        class="px-10 py-5 bg-primary hover:bg-primary-dark text-white text-xl font-bold rounded-2xl shadow-glow transform hover:-translate-y-1 transition-all duration-200 w-full sm:w-auto flex items-center justify-center gap-2 cursor-pointer"
      >
        <Icon name="download" />
        {t.common.downloadForFree}
      </button>
    </div>

    <p class="mt-6 text-sm text-slate-500">{t.ctaFinal.availableFor}</p>
  </div>
</section>

<script>
  document.getElementById('cta-download-btn')?.addEventListener('click', () => {
    const fn = (window as any).openDownloadModal;
    if (typeof fn === 'function') fn();
  });
</script>
