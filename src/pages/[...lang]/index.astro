---
import ViewersWithImages from "../../components/ViewersWithImages.astro";
import ToolConvergence from "../../components/ToolConvergence.astro";
import ComparisonTable from "../../components/ComparisonTable.astro";
import Performance from "../../components/Performance.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import Features from "../../components/Features.astro";
import Profiles from "../../components/Profiles.astro";
import CtaFinal from "../../components/CtaFinal.astro";
import Footer from "../../components/Footer.astro";
import Navbar from "../../components/Navbar.astro";
import Hero from "../../components/Hero.astro";
import Head from "../../components/Head.astro";
import {
  getTranslations,
  getLocalePath,
  getAlternateLinks,
  ogLocales,
  locales,
  defaultLocale,
} from "../../i18n/utils";

export function getStaticPaths() {
  return locales.map((locale) => ({
    params: { lang: locale === defaultLocale ? undefined : locale },
    props: { locale },
  }));
}

const { locale } = Astro.props;
const t = getTranslations(locale);
const alternateLinks = getAlternateLinks("/");
const canonicalUrl = `https://dokos.app${getLocalePath(locale)}/`;

const seo = {
  title: t.meta.title,
  description: t.meta.description,
  canonicalUrl,
  ogImage: "https://dokos.app/og-image.png",
  ogLocale: ogLocales[locale],
  alternateLinks,
  locale,
};
---

<BaseLayout locale={locale} t={t}>
  <Head slot="head" {...seo} />
  <Navbar slot="navbar" t={t} locale={locale} />

  <Hero t={t} />
  <ToolConvergence t={t} />
  <ViewersWithImages t={t} />
  <Features t={t} />
  <ComparisonTable t={t} />
  <Profiles t={t} />
  <Performance t={t} />
  <CtaFinal t={t} />

  <Footer slot="footer" t={t} locale={locale} />
</BaseLayout>
